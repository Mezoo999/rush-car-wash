(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81140,69340,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:a=!0}={}){return function(t){if(e?.(t),!1===a||!t.defaultPrevented)return r?.(t)}}"u">typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t],81140);var r=e.i(71645),a=e.i(34620);r[" useEffectEvent ".trim().toString()],r[" useInsertionEffect ".trim().toString()];var s=r[" useInsertionEffect ".trim().toString()]||a.useLayoutEffect;function n({prop:e,defaultProp:t,onChange:a=()=>{},caller:n}){let[i,l,o]=function({defaultProp:e,onChange:t}){let[a,n]=r.useState(e),i=r.useRef(a),l=r.useRef(t);return s(()=>{l.current=t},[t]),r.useEffect(()=>{i.current!==a&&(l.current?.(a),i.current=a)},[a,i]),[a,n,l]}({defaultProp:t,onChange:a}),c=void 0!==e,u=c?e:i;{let t=r.useRef(void 0!==e);r.useEffect(()=>{let e=t.current;if(e!==c){let t=c?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,n])}return[u,r.useCallback(t=>{if(c){let r="function"==typeof t?t(e):t;r!==e&&o.current?.(r)}else l(t)},[c,e,l,o])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>n],69340)},96626,e=>{"use strict";var t=e.i(71645),r=e.i(20783),a=e.i(34620),s=e=>{var s;let i,l,{present:o,children:c}=e,u=function(e){var r,s;let[i,l]=t.useState(),o=t.useRef(null),c=t.useRef(e),u=t.useRef("none"),[d,f]=(r=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>s[e][t]??e,r));return t.useEffect(()=>{let e=n(o.current);u.current="mounted"===d?e:"none"},[d]),(0,a.useLayoutEffect)(()=>{let t=o.current,r=c.current;if(r!==e){let a=u.current,s=n(t);e?f("MOUNT"):"none"===s||t?.display==="none"?f("UNMOUNT"):r&&a!==s?f("ANIMATION_OUT"):f("UNMOUNT"),c.current=e}},[e,f]),(0,a.useLayoutEffect)(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,r=r=>{let a=n(o.current).includes(CSS.escape(r.animationName));if(r.target===i&&a&&(f("ANIMATION_END"),!c.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},a=e=>{e.target===i&&(u.current=n(o.current))};return i.addEventListener("animationstart",a),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}f("ANIMATION_END")},[i,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{o.current=e?getComputedStyle(e):null,l(e)},[])}}(o),d="function"==typeof c?c({present:u.isPresent}):t.Children.only(c),f=(0,r.useComposedRefs)(u.ref,(s=d,(l=(i=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.ref:(l=(i=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.props.ref:s.props.ref||s.ref));return"function"==typeof c||u.isPresent?t.cloneElement(d,{ref:f}):null};function n(e){return e?.animationName||"none"}s.displayName="Presence",e.s(["Presence",()=>s])},38691,e=>{"use strict";var t=e.i(71645),r=e.i(20755),a=e.i(46696);function s(e={}){let{userId:n,userRole:i="customer",enabled:l=!0}=e,[o,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0),[f,m]=(0,t.useState)(null),h=(0,t.useRef)(null),p=(0,t.useRef)(!0),x=(0,t.useCallback)(async()=>{if(l)try{d(!0),m(null);let e=r.supabase.from("orders").select(`
          *,
          car:cars(*),
          service:services(*),
          worker:users!orders_worker_id_fkey(*)
        `).order("created_at",{ascending:!1});"customer"===i&&n?e=e.eq("user_id",n):"worker"===i&&n&&(e=e.eq("worker_id",n));let{data:t,error:a}=await e;if(a)throw a;p.current&&c(t||[])}catch(e){console.error("Error fetching orders:",e),p.current&&m(e instanceof Error?e:Error("Failed to fetch orders"))}finally{p.current&&d(!1)}},[n,i,l]);return(0,t.useEffect)(()=>{if(p.current=!0,x(),l)return h.current=r.supabase.channel(`orders_${i}_${n||"admin"}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},async e=>{let t=e.new;if(("admin"===i||"customer"===i&&t.user_id===n||"worker"===i&&t.worker_id===n)&&p.current){let{data:e}=await r.supabase.from("orders").select(`
                *,
                car:cars(*),
                service:services(*),
                worker:users!orders_worker_id_fkey(*)
              `).eq("id",t.id).single();e&&(c(t=>[e,...t]),"admin"===i&&a.toast.success("طلب جديد!",{description:`طلب جديد بقيمة ${t.total_amount} ج.م`}))}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},e=>{var t,r,s;let n=e.new,l=e.old;p.current&&(c(e=>e.map(e=>e.id===n.id?{...e,...n}:e)),l.status!==n.status&&(t=n,r=l.status,"customer"===(s=i)?a.toast.info("تحديث الحالة",{description:`حالة طلبك تغيرت إلى: ${{pending:"معلق",confirmed:"مؤكد",assigned:"تم التعيين",on_the_way:"في الطريق",in_progress:"قيد التنفيذ",completed:"مكتمل",cancelled:"ملغي"}[t.status]}`}):"worker"===s&&a.toast.info("تحديث",{description:`تم تحديث حالة الطلب ${t.id.slice(0,8)}`})))}).subscribe(),()=>{p.current=!1,h.current&&r.supabase.removeChannel(h.current)}},[n,i,l,x]),{orders:o,loading:u,error:f,refresh:(0,t.useCallback)(()=>x(),[x]),setOrders:c}}function n(e){let[a,s]=(0,t.useState)({today:0,week:0,month:0,totalJobs:0,completedJobs:0}),[n,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{e&&(async()=>{i(!0);try{let t=new Date().toISOString().split("T")[0],a=new Date(Date.now()-6048e5).toISOString().split("T")[0],n=new Date(Date.now()-2592e6).toISOString().split("T")[0],{data:i}=await r.supabase.from("orders").select("total_amount, status, created_at").eq("worker_id",e).eq("status","completed");if(i){let e=i.filter(e=>e.created_at.startsWith(t)).reduce((e,t)=>e+t.total_amount,0),r=i.filter(e=>e.created_at>=a).reduce((e,t)=>e+t.total_amount,0),l=i.filter(e=>e.created_at>=n).reduce((e,t)=>e+t.total_amount,0);s({today:e,week:r,month:l,totalJobs:i.length,completedJobs:i.length})}}catch(e){console.error("Error fetching earnings:",e)}finally{i(!1)}})()},[e]),{earnings:a,loading:n}}e.s(["useRealtimeOrders",()=>s,"useWorkerEarnings",()=>n])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},5125,e=>{"use strict";let t=(0,e.i(75254).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>t],5125)},94179,e=>{"use strict";var t=e.i(43476),r=e.i(25913),a=e.i(86011),s=e.i(47163);let n=(0,r.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r="default",asChild:i=!1,...l}){let o=i?a.Slot.Root:"span";return(0,t.jsx)(o,{"data-slot":"badge","data-variant":r,className:(0,s.cn)(n({variant:r}),e),...l})}e.s(["Badge",()=>i])},50337,73297,e=>{"use strict";function t(e,t){switch(t){case"suv":return e.base_price_suv;case"luxury":return e.base_price_luxury;default:return e.base_price_standard}}function r(e){return e.reduce((e,t)=>e+t.price,0)}function a(e){return`${new Intl.NumberFormat("ar-EG",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)} ج.م`}function s(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})}function n(e){let[t,r]=e.split(":"),a=parseInt(t,10);return`${a>12?a-12:0===a?12:a}:${r} ${a>=12?"م":"ص"}`}function i(e=1990,t=new Date().getFullYear()){let r=[];for(let a=t;a>=e;a--)r.push(a);return r}function l(){let e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}function o(e=30){let t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]}e.s(["CAR_BRANDS",0,["Toyota","Honda","Nissan","Hyundai","Kia","BMW","Mercedes","Audi","Volkswagen","Ford","Chevrolet","Peugeot","Renault","Fiat","Chery","BYD","MG","Geely","Changan","Suzuki","Mitsubishi","Subaru","Lexus","Infiniti","Acura","Volvo","Jaguar","Land Rover","Porsche","Tesla"],"CATEGORY_LABELS",0,{standard:"عادية",suv:"دفع رباعي",luxury:"فاخرة"},"PAYMENT_METHOD_LABELS",0,{cash:"كاش",online:"دفع إلكتروني"},"SERVICE_AREAS",0,["6th of October","Sheikh Zayed"],"STATUS_COLORS",0,{pending:"bg-yellow-500",confirmed:"bg-blue-500",assigned:"bg-purple-500",on_the_way:"bg-orange-500",in_progress:"bg-cyan-500",completed:"bg-green-500",cancelled:"bg-red-500"},"STATUS_LABELS",0,{pending:"معلق",confirmed:"مؤكد",assigned:"تم التعيين",on_the_way:"في الطريق",in_progress:"قيد التنفيذ",completed:"مكتمل",cancelled:"ملغي"},"TIME_SLOTS",0,["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30"]],73297),e.s(["calculateAddOnsTotal",()=>r,"calculateServicePrice",()=>t,"formatDate",()=>s,"formatPriceWithCurrency",()=>a,"formatTime",()=>n,"getMaxBookingDate",()=>o,"getTomorrowDate",()=>l,"getYearsRange",()=>i],50337)},88844,e=>{"use strict";let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},92270,e=>{"use strict";let t=(0,e.i(75254).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);e.s(["LogOut",()=>t],92270)},48425,e=>{"use strict";var t=e.i(71645),r=e.i(74080),a=e.i(91918),s=e.i(43476),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let n=(0,a.createSlot)(`Primitive.${r}`),i=t.forwardRef((e,t)=>{let{asChild:a,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?n:r,{...i,ref:t})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});function i(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>i])},30030,34620,e=>{"use strict";var t=e.i(71645),r=e.i(43476);function a(e,a){let s=t.createContext(a),n=e=>{let{children:a,...n}=e,i=t.useMemo(()=>n,Object.values(n));return(0,r.jsx)(s.Provider,{value:i,children:a})};return n.displayName=e+"Provider",[n,function(r){let n=t.useContext(s);if(n)return n;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function s(e,a=[]){let n=[],i=()=>{let r=n.map(e=>t.createContext(e));return function(a){let s=a?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return i.scopeName=e,[function(a,s){let i=t.createContext(s),l=n.length;n=[...n,s];let o=a=>{let{scope:s,children:n,...o}=a,c=s?.[e]?.[l]||i,u=t.useMemo(()=>o,Object.values(o));return(0,r.jsx)(c.Provider,{value:u,children:n})};return o.displayName=a+"Provider",[o,function(r,n){let o=n?.[e]?.[l]||i,c=t.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${a}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return a.scopeName=r.scopeName,a}(i,...a)]}e.s(["createContext",()=>a,"createContextScope",()=>s],30030);var n=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>n],34620)},30207,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>r.current?.(...e),[])}e.s(["useCallbackRef",()=>r])},55838,(e,t,r)=>{"use strict";var a=e.r(71645),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var u="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),s=a[0].inst,u=a[1];return l(function(){s.value=r,s.getSnapshot=t,c(s)&&u({inst:s})},[e,r,t]),i(function(){return c(s)&&u({inst:s}),e(function(){c(s)&&u({inst:s})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},63270,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(30030),s=e.i(30207),n=e.i(34620),i=e.i(48425),l=e.i(2239);function o(){return()=>{}}var c="Avatar",[u,d]=(0,a.createContextScope)(c),[f,m]=u(c),h=r.forwardRef((e,a)=>{let{__scopeAvatar:s,...n}=e,[l,o]=r.useState("idle");return(0,t.jsx)(f,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:o,children:(0,t.jsx)(i.Primitive.span,{...n,ref:a})})});h.displayName=c;var p="AvatarImage",x=r.forwardRef((e,a)=>{let{__scopeAvatar:c,src:u,onLoadingStatusChange:d=()=>{},...f}=e,h=m(p,c),x=function(e,{referrerPolicy:t,crossOrigin:a}){let s=(0,l.useSyncExternalStore)(o,()=>!0,()=>!1),i=r.useRef(null),c=s?(i.current||(i.current=new window.Image),i.current):null,[u,d]=r.useState(()=>y(c,e));return(0,n.useLayoutEffect)(()=>{d(y(c,e))},[c,e]),(0,n.useLayoutEffect)(()=>{let e=e=>()=>{d(e)};if(!c)return;let r=e("loaded"),s=e("error");return c.addEventListener("load",r),c.addEventListener("error",s),t&&(c.referrerPolicy=t),"string"==typeof a&&(c.crossOrigin=a),()=>{c.removeEventListener("load",r),c.removeEventListener("error",s)}},[c,a,t]),u}(u,f),v=(0,s.useCallbackRef)(e=>{d(e),h.onImageLoadingStatusChange(e)});return(0,n.useLayoutEffect)(()=>{"idle"!==x&&v(x)},[x,v]),"loaded"===x?(0,t.jsx)(i.Primitive.img,{...f,ref:a,src:u}):null});x.displayName=p;var v="AvatarFallback",g=r.forwardRef((e,a)=>{let{__scopeAvatar:s,delayMs:n,...l}=e,o=m(v,s),[c,u]=r.useState(void 0===n);return r.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>u(!0),n);return()=>window.clearTimeout(e)}},[n]),c&&"loaded"!==o.imageLoadingStatus?(0,t.jsx)(i.Primitive.span,{...l,ref:a}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}g.displayName=v,e.s(["Avatar",()=>h,"AvatarFallback",()=>g,"AvatarImage",()=>x,"Fallback",()=>g,"Image",()=>x,"Root",()=>h,"createAvatarScope",()=>d],97456);var b=e.i(97456),b=b,w=e.i(47163);function j({className:e,size:r="default",...a}){return(0,t.jsx)(b.Root,{"data-slot":"avatar","data-size":r,className:(0,w.cn)("group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6",e),...a})}function N({className:e,...r}){return(0,t.jsx)(b.Image,{"data-slot":"avatar-image",className:(0,w.cn)("aspect-square size-full",e),...r})}function k({className:e,...r}){return(0,t.jsx)(b.Fallback,{"data-slot":"avatar-fallback",className:(0,w.cn)("bg-muted text-muted-foreground flex size-full items-center justify-center rounded-full text-sm group-data-[size=sm]/avatar:text-xs",e),...r})}e.s(["Avatar",()=>j,"AvatarFallback",()=>k,"AvatarImage",()=>N],63270)},70273,e=>{"use strict";let t=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],70273)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},34858,e=>{"use strict";let t=(0,e.i(75254).default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);e.s(["Navigation",()=>t],34858)},75830,86318,e=>{"use strict";var t=e.i(71645),r=e.i(30030),a=e.i(20783),s=e.i(91918),n=e.i(43476);function i(e){let i=e+"CollectionProvider",[l,o]=(0,r.createContextScope)(i),[c,u]=l(i,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:r,children:a}=e,s=t.default.useRef(null),i=t.default.useRef(new Map).current;return(0,n.jsx)(c,{scope:r,itemMap:i,collectionRef:s,children:a})};d.displayName=i;let f=e+"CollectionSlot",m=(0,s.createSlot)(f),h=t.default.forwardRef((e,t)=>{let{scope:r,children:s}=e,i=u(f,r),l=(0,a.useComposedRefs)(t,i.collectionRef);return(0,n.jsx)(m,{ref:l,children:s})});h.displayName=f;let p=e+"CollectionItemSlot",x="data-radix-collection-item",v=(0,s.createSlot)(p),g=t.default.forwardRef((e,r)=>{let{scope:s,children:i,...l}=e,o=t.default.useRef(null),c=(0,a.useComposedRefs)(r,o),d=u(p,s);return t.default.useEffect(()=>(d.itemMap.set(o,{ref:o,...l}),()=>void d.itemMap.delete(o))),(0,n.jsx)(v,{...{[x]:""},ref:c,children:i})});return g.displayName=p,[{Provider:d,Slot:h,ItemSlot:g},function(r){let a=u(e+"CollectionConsumer",r);return t.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${x}]`));return Array.from(a.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[a.collectionRef,a.itemMap])},o]}var l=new WeakMap;function o(e,t){var r,a;let s,n,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let l=(r=e,a=t,s=r.length,(i=(n=c(a))>=0?n:s+n)<0||i>=s?-1:i);return -1===l?void 0:e[l]}function c(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#e;constructor(e){super(e),this.#e=[...super.keys()],l.set(this,!0)}set(e,t){return l.get(this)&&(this.has(e)?this.#e[this.#e.indexOf(e)]=e:this.#e.push(e)),super.set(e,t),this}insert(e,t,r){let a,s=this.has(t),n=this.#e.length,i=c(e),l=i>=0?i:n+i,o=l<0||l>=n?-1:l;if(o===this.size||s&&o===this.size-1||-1===o)return this.set(t,r),this;let u=this.size+ +!s;i<0&&l++;let d=[...this.#e],f=!1;for(let e=l;e<u;e++)if(l===e){let n=d[e];d[e]===t&&(n=d[e+1]),s&&this.delete(t),a=this.get(n),this.set(t,r)}else{f||d[e-1]!==t||(f=!0);let r=d[f?e:e-1],s=a;a=this.get(r),this.delete(r),this.set(r,s)}return this}with(t,r,a){let s=new e(this);return s.insert(t,r,a),s}before(e){let t=this.#e.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a,t,r)}after(e){let t=this.#e.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let a=this.#e.indexOf(e);return -1===a?this:this.insert(a+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#e=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#e.splice(this.#e.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=o(this.#e,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=o(this.#e,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#e.indexOf(e)}keyAt(e){return o(this.#e,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let a=r+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.at(a)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let a=r+t;return a<0&&(a=0),a>=this.size&&(a=this.size-1),this.keyAt(a)}find(e,t){let r=0;for(let a of this){if(Reflect.apply(e,t,[a,r,this]))return a;r++}}findIndex(e,t){let r=0;for(let a of this){if(Reflect.apply(e,t,[a,r,this]))return r;r++}return -1}filter(t,r){let a=[],s=0;for(let e of this)Reflect.apply(t,r,[e,s,this])&&a.push(e),s++;return new e(a)}map(t,r){let a=[],s=0;for(let e of this)a.push([e[0],Reflect.apply(t,r,[e,s,this])]),s++;return new e(a)}reduce(...e){let[t,r]=e,a=0,s=r??this.at(0);for(let r of this)s=0===a&&1===e.length?r:Reflect.apply(t,this,[s,r,a,this]),a++;return s}reduceRight(...e){let[t,r]=e,a=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let s=this.at(r);a=r===this.size-1&&1===e.length?s:Reflect.apply(t,this,[a,s,r,this])}return a}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),a=this.get(r);t.set(r,a)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let a=new e,s=this.size-1;if(void 0===t)return a;t<0&&(t+=this.size),void 0!==r&&r>0&&(s=r-1);for(let e=t;e<=s;e++){let t=this.keyAt(e),r=this.get(t);a.set(t,r)}return a}every(e,t){let r=0;for(let a of this){if(!Reflect.apply(e,t,[a,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let a of this){if(Reflect.apply(e,t,[a,r,this]))return!0;r++}return!1}}),e.s(["createCollection",()=>i],75830);var u=t.createContext(void 0);function d(e){let r=t.useContext(u);return e||r||"ltr"}e.s(["useDirection",()=>d],86318)},73375,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},84762,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},78928,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(70065),s=e.i(67881),n=e.i(94179),i=e.i(25913),l=e.i(81140),o=e.i(30030),c=e.i(75830),u=e.i(20783),d=e.i(10772),f=e.i(48425),m=e.i(30207),h=e.i(69340),p=e.i(86318),x="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},g="RovingFocusGroup",[y,b,w]=(0,c.createCollection)(g),[j,N]=(0,o.createContextScope)(g,[w]),[k,C]=j(g),S=r.forwardRef((e,r)=>(0,t.jsx)(y.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(y.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(R,{...e,ref:r})})}));S.displayName=g;var R=r.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:s,orientation:n,loop:i=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:j=!1,...N}=e,C=r.useRef(null),S=(0,u.useComposedRefs)(a,C),R=(0,p.useDirection)(o),[E,_]=(0,h.useControllableState)({prop:c,defaultProp:d??null,onChange:y,caller:g}),[A,M]=r.useState(!1),I=(0,m.useCallbackRef)(w),O=b(s),D=r.useRef(!1),[L,P]=r.useState(0);return r.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(x,I),()=>e.removeEventListener(x,I)},[I]),(0,t.jsx)(k,{scope:s,orientation:n,dir:R,loop:i,currentTabStopId:E,onItemFocus:r.useCallback(e=>_(e),[_]),onItemShiftTab:r.useCallback(()=>M(!0),[]),onFocusableItemAdd:r.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>P(e=>e-1),[]),children:(0,t.jsx)(f.Primitive.div,{tabIndex:A||0===L?-1:0,"data-orientation":n,...N,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,l.composeEventHandlers)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,l.composeEventHandlers)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(x,v);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=O().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),j)}}D.current=!1}),onBlur:(0,l.composeEventHandlers)(e.onBlur,()=>M(!1))})})}),E="RovingFocusGroupItem",_=r.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:s,focusable:n=!0,active:i=!1,tabStopId:o,children:c,...u}=e,m=(0,d.useId)(),h=o||m,p=C(E,s),x=p.currentTabStopId===h,v=b(s),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:j}=p;return r.useEffect(()=>{if(n)return g(),()=>w()},[n,g,w]),(0,t.jsx)(y.ItemSlot,{scope:s,id:h,focusable:n,active:i,children:(0,t.jsx)(f.Primitive.span,{tabIndex:x?0:-1,"data-orientation":p.orientation,...u,ref:a,onMouseDown:(0,l.composeEventHandlers)(e.onMouseDown,e=>{n?p.onItemFocus(h):e.preventDefault()}),onFocus:(0,l.composeEventHandlers)(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:(0,l.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var a;let s=(a=e.key,"rtl"!==r?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return A[s]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var r,a;"prev"===t&&s.reverse();let n=s.indexOf(e.currentTarget);s=p.loop?(r=s,a=n+1,r.map((e,t)=>r[(a+t)%r.length])):s.slice(n+1)}setTimeout(()=>T(s))}}),children:"function"==typeof c?c({isCurrentTabStop:x,hasTabStop:null!=j}):c})})});_.displayName=E;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}var M=e.i(96626),I="Tabs",[O,D]=(0,o.createContextScope)(I,[N]),L=N(),[P,z]=O(I),F=r.forwardRef((e,r)=>{let{__scopeTabs:a,value:s,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...u}=e,m=(0,p.useDirection)(o),[x,v]=(0,h.useControllableState)({prop:s,onChange:n,defaultProp:i??"",caller:I});return(0,t.jsx)(P,{scope:a,baseId:(0,d.useId)(),value:x,onValueChange:v,orientation:l,dir:m,activationMode:c,children:(0,t.jsx)(f.Primitive.div,{dir:m,"data-orientation":l,...u,ref:r})})});F.displayName=I;var B="TabsList",$=r.forwardRef((e,r)=>{let{__scopeTabs:a,loop:s=!0,...n}=e,i=z(B,a),l=L(a);return(0,t.jsx)(S,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:(0,t.jsx)(f.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:r})})});$.displayName=B;var U="TabsTrigger",H=r.forwardRef((e,r)=>{let{__scopeTabs:a,value:s,disabled:n=!1,...i}=e,o=z(U,a),c=L(a),u=K(o.baseId,s),d=W(o.baseId,s),m=s===o.value;return(0,t.jsx)(_,{asChild:!0,...c,focusable:!n,active:m,children:(0,t.jsx)(f.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...i,ref:r,onMouseDown:(0,l.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:(0,l.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:(0,l.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;m||n||!e||o.onValueChange(s)})})})});H.displayName=U;var q="TabsContent",V=r.forwardRef((e,a)=>{let{__scopeTabs:s,value:n,forceMount:i,children:l,...o}=e,c=z(q,s),u=K(c.baseId,n),d=W(c.baseId,n),m=n===c.value,h=r.useRef(m);return r.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(M.Presence,{present:i||m,children:({present:r})=>(0,t.jsx)(f.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:d,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:h.current?"0s":void 0},children:r&&l})})});function K(e,t){return`${e}-trigger-${t}`}function W(e,t){return`${e}-content-${t}`}V.displayName=q,e.s(["Content",()=>V,"List",()=>$,"Root",()=>F,"Tabs",()=>F,"TabsContent",()=>V,"TabsList",()=>$,"TabsTrigger",()=>H,"Trigger",()=>H,"createTabsScope",()=>D],26209);var G=e.i(26209),G=G,J=e.i(47163);function Y({className:e,orientation:r="horizontal",...a}){return(0,t.jsx)(G.Root,{"data-slot":"tabs","data-orientation":r,orientation:r,className:(0,J.cn)("group/tabs flex gap-2 data-[orientation=horizontal]:flex-col",e),...a})}let X=(0,i.cva)("rounded-lg p-[3px] group-data-[orientation=horizontal]/tabs:h-9 data-[variant=line]:rounded-none group/tabs-list text-muted-foreground inline-flex w-fit items-center justify-center group-data-[orientation=vertical]/tabs:h-fit group-data-[orientation=vertical]/tabs:flex-col",{variants:{variant:{default:"bg-muted",line:"gap-1 bg-transparent"}},defaultVariants:{variant:"default"}});function Z({className:e,variant:r="default",...a}){return(0,t.jsx)(G.List,{"data-slot":"tabs-list","data-variant":r,className:(0,J.cn)(X({variant:r}),e),...a})}function Q({className:e,...r}){return(0,t.jsx)(G.Trigger,{"data-slot":"tabs-trigger",className:(0,J.cn)("focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring text-foreground/60 hover:text-foreground dark:text-muted-foreground dark:hover:text-foreground relative inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all group-data-[orientation=vertical]/tabs:w-full group-data-[orientation=vertical]/tabs:justify-start focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 group-data-[variant=default]/tabs-list:data-[state=active]:shadow-sm group-data-[variant=line]/tabs-list:data-[state=active]:shadow-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","group-data-[variant=line]/tabs-list:bg-transparent group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:border-transparent dark:group-data-[variant=line]/tabs-list:data-[state=active]:bg-transparent","data-[state=active]:bg-background dark:data-[state=active]:text-foreground dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 data-[state=active]:text-foreground","after:bg-foreground after:absolute after:opacity-0 after:transition-opacity group-data-[orientation=horizontal]/tabs:after:inset-x-0 group-data-[orientation=horizontal]/tabs:after:bottom-[-5px] group-data-[orientation=horizontal]/tabs:after:h-0.5 group-data-[orientation=vertical]/tabs:after:inset-y-0 group-data-[orientation=vertical]/tabs:after:-right-1 group-data-[orientation=vertical]/tabs:after:w-0.5 group-data-[variant=line]/tabs-list:data-[state=active]:after:opacity-100",e),...r})}function ee({className:e,...r}){return(0,t.jsx)(G.Content,{"data-slot":"tabs-content",className:(0,J.cn)("flex-1 outline-none",e),...r})}var et=e.i(63270),er=e.i(5125),ea=e.i(87316),es=e.i(46897),en=e.i(3116),ei=e.i(70273),el=e.i(16715),eo=e.i(73375),ec=e.i(88844),eu=e.i(75254);let ed=(0,eu.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ef=(0,eu.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var em=e.i(92270),eh=e.i(34858),ep=e.i(61659),ex=e.i(38691),ev=e.i(73297),eg=e.i(50337),ey=e.i(20755),eb=e.i(22016),ew=e.i(46696),ej=e.i(46932),eN=e.i(30374),ek=e.i(84762);function eC({orderId:e,workerId:a,isOpen:n,onClose:i,onSubmit:l}){let[o,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(0),[f,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),x=async()=>{if(0===o)return void ew.toast.error("يرجى اختيار التقييم");p(!0);try{let{data:{user:t}}=await ey.supabase.auth.getUser();if(!t)return void ew.toast.error("يرجى تسجيل الدخول أولاً");let{error:r}=await ey.supabase.from("reviews").insert({order_id:e,user_id:t.id,worker_id:a,rating:o,comment:f});if(r)throw r;let{data:s}=await ey.supabase.from("reviews").select("rating").eq("worker_id",a);if(s){let e=s.reduce((e,t)=>e+t.rating,0)/s.length;await ey.supabase.from("workers").update({rating:Math.round(10*e)/10}).eq("id",a)}ew.toast.success("شكراً لتقييمك!"),l(),i()}catch(e){ew.toast.error("خطأ: "+e.message)}p(!1)};return(0,t.jsx)(eN.Dialog,{open:n,onOpenChange:i,children:(0,t.jsxs)(eN.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(eN.DialogHeader,{children:(0,t.jsx)(eN.DialogTitle,{className:"text-center",children:"قيم خدمتنا"})}),(0,t.jsxs)("div",{className:"py-6",children:[(0,t.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"كيف كانت تجربتك مع عاملنا؟"}),(0,t.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(e=>(0,t.jsx)(ej.motion.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>c(e),onMouseEnter:()=>d(e),onMouseLeave:()=>d(0),className:"focus:outline-none",children:(0,t.jsx)(ei.Star,{className:`w-10 h-10 transition-colors ${e<=(u||o)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},e))}),(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500 mb-4",children:[1===o&&"سيء جداً",2===o&&"سيء",3===o&&"مقبول",4===o&&"جيد",5===o&&"ممتاز!"]}),(0,t.jsx)(ek.Textarea,{placeholder:"اكتب تعليقك هنا (اختياري)...",value:f,onChange:e=>m(e.target.value),className:"mb-4",rows:3}),(0,t.jsx)(s.Button,{className:"w-full bg-[#d4a574] hover:bg-[#c49464] text-[#1a1a1a]",onClick:x,disabled:h||0===o,children:h?"جاري الإرسال...":"إرسال التقييم"})]})]})})}function eS(){let[e,n]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)("active");return((0,r.useEffect)(()=>{(async()=>{let{data:{user:e}}=await ey.supabase.auth.getUser();if(e){let{data:t}=await ey.supabase.from("users").select("*").eq("id",e.id).single();n(t)}l(!1)})()},[]),i)?(0,t.jsx)("div",{className:"min-h-screen bg-[#faf8f5] flex items-center justify-center",children:(0,t.jsx)(el.RefreshCw,{className:"w-8 h-8 animate-spin text-[#d4a574]"})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-[#faf8f5]",children:[(0,t.jsx)("header",{className:"bg-[#1a1a1a] text-white p-4 sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(et.Avatar,{className:"w-10 h-10 bg-[#d4a574]",children:(0,t.jsx)(et.AvatarFallback,{className:"bg-[#d4a574] text-[#1a1a1a] font-bold",children:e.full_name?.charAt(0)||"م"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-bold",children:e.full_name||"عميلنا العزيز"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.phone})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eb.default,{href:"/profile",children:(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",className:"text-white",children:[(0,t.jsx)(ef,{className:"w-4 h-4 ml-1"}),"الملف الشخصي"]})}),(0,t.jsx)(eb.default,{href:"/",children:(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",className:"text-white",children:[(0,t.jsx)(eo.ChevronLeft,{className:"w-4 h-4 ml-1"}),"الرئيسية"]})})]})]})}),(0,t.jsxs)("main",{className:"container mx-auto p-4 max-w-4xl",children:[(0,t.jsx)(eR,{userId:e.id}),(0,t.jsxs)(Y,{defaultValue:"active",className:"mt-6",onValueChange:c,children:[(0,t.jsxs)(Z,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(Q,{value:"active",children:[(0,t.jsx)(ec.Package,{className:"w-4 h-4 ml-2"}),"الطلبات النشطة"]}),(0,t.jsxs)(Q,{value:"history",children:[(0,t.jsx)(ed,{className:"w-4 h-4 ml-2"}),"السجل"]}),(0,t.jsxs)(Q,{value:"settings",children:[(0,t.jsx)(ef,{className:"w-4 h-4 ml-2"}),"الإعدادات"]})]}),(0,t.jsx)(ee,{value:"active",className:"mt-4",children:(0,t.jsx)(eE,{userId:e.id})}),(0,t.jsx)(ee,{value:"history",className:"mt-4",children:(0,t.jsx)(e_,{userId:e.id})}),(0,t.jsx)(ee,{value:"settings",className:"mt-4",children:(0,t.jsx)(eT,{user:e})})]})]})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#faf8f5] flex items-center justify-center",children:(0,t.jsxs)(a.Card,{className:"p-8 text-center",children:[(0,t.jsx)("p",{className:"mb-4",children:"يرجى تسجيل الدخول أولاً"}),(0,t.jsx)(eb.default,{href:"/booking",children:(0,t.jsx)(s.Button,{children:"الذهاب للحجز"})})]})})}function eR({userId:e}){let[s,n]=(0,r.useState)({total:0,completed:0,totalSpent:0});return(0,r.useEffect)(()=>{(async()=>{let{data:t}=await ey.supabase.from("orders").select("status, total_amount").eq("user_id",e);t&&n({total:t.length,completed:t.filter(e=>"completed"===e.status).length,totalSpent:t.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.total_amount,0)})})()},[e]),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-[#d4a574]",children:s.total}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"إجمالي الطلبات"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-500",children:s.completed}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"مكتملة"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-[#1a1a1a]",children:(0,eg.formatPriceWithCurrency)(s.totalSpent)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"إجمالي المصروفات"})]})})]})}function eE({userId:e}){let{orders:r,loading:n}=(0,ex.useRealtimeOrders)({userId:e,userRole:"customer"}),i=r.filter(e=>!["completed","cancelled"].includes(e.status));return n?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(el.RefreshCw,{className:"w-8 h-8 animate-spin mx-auto text-[#d4a574]"})}):0===i.length?(0,t.jsxs)(a.Card,{className:"text-center py-12",children:[(0,t.jsx)(ec.Package,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"لا توجد طلبات نشطة حالياً"}),(0,t.jsx)(eb.default,{href:"/booking",children:(0,t.jsx)(s.Button,{className:"bg-[#d4a574] hover:bg-[#c49464] text-[#1a1a1a]",children:"احجز غسيل جديد"})})]}):(0,t.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,t.jsx)(eA,{order:e,showTracking:!0},e.id))})}function e_({userId:e}){let{orders:s,loading:n}=(0,ex.useRealtimeOrders)({userId:e,userRole:"customer"}),i=s.filter(e=>"completed"===e.status),[l,o]=(0,r.useState)(null);return n?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(el.RefreshCw,{className:"w-8 h-8 animate-spin mx-auto text-[#d4a574]"})}):0===i.length?(0,t.jsxs)(a.Card,{className:"text-center py-12",children:[(0,t.jsx)(ed,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"لا توجد طلبات سابقة"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,t.jsx)(eA,{order:e,showRebook:!0,onRate:()=>o(e)},e.id))}),l&&(0,t.jsx)(eC,{orderId:l.id,workerId:l.worker_id||"",isOpen:!!l,onClose:()=>o(null),onSubmit:()=>{ew.toast.success("تم إرسال التقييم بنجاح!"),o(null)}})]})}function eA({order:e,showTracking:r,showRebook:i,onRate:l}){let o=[{status:"pending",label:"معلق",icon:en.Clock},{status:"confirmed",label:"مؤكد",icon:ec.Package},{status:"assigned",label:"تم التعيين",icon:er.Car},{status:"on_the_way",label:"في الطريق",icon:eh.Navigation},{status:"in_progress",label:"قيد التنفيذ",icon:el.RefreshCw},{status:"completed",label:"مكتمل",icon:ei.Star}],c=o.findIndex(t=>t.status===e.status);return(0,t.jsx)(a.Card,{className:"overflow-hidden",children:(0,t.jsxs)(a.CardContent,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(er.Car,{className:"w-5 h-5 text-[#d4a574]"}),(0,t.jsxs)("span",{className:"font-bold",children:[e.car?.brand," ",e.car?.model]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.car?.plate_number})]}),(0,t.jsx)(n.Badge,{className:ev.STATUS_COLORS[e.status],children:ev.STATUS_LABELS[e.status]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:e.service?.name_ar||"خدمة غسيل"}),(0,t.jsx)("p",{className:"text-[#d4a574] font-bold",children:(0,eg.formatPriceWithCurrency)(e.total_amount)})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[(0,eg.formatDate)(e.preferred_date)," - ",(0,eg.formatTime)(e.preferred_time)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(es.MapPin,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"truncate",children:e.address})]})]}),r&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,t.jsx)("div",{className:"flex justify-between",children:o.map((e,r)=>(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r<=c?"bg-[#d4a574] text-white":"bg-gray-200 text-gray-400"}`,children:(0,t.jsx)(e.icon,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"text-xs mt-1 text-gray-500",children:e.label})]},e.status))})}),i&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t space-y-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",className:"w-full",onClick:()=>{localStorage.setItem("rebook_data",JSON.stringify({carBrand:e.car?.brand,carModel:e.car?.model,carCategory:e.car?.category,serviceId:e.service_id})),window.location.href="/booking"},children:[(0,t.jsx)(el.RefreshCw,{className:"w-4 h-4 ml-2"}),"حجز نفس الخدمة مرة أخرى"]}),l&&(0,t.jsxs)(s.Button,{className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white",onClick:l,children:[(0,t.jsx)(ei.Star,{className:"w-4 h-4 ml-2"}),"قيم الخدمة"]})]})]})})}function eT({user:e}){let r=async()=>{await ey.supabase.auth.signOut(),ew.toast.success("تم تسجيل الخروج"),window.location.href="/"};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"إعدادات الحساب"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(eM,{children:"الاسم"}),(0,t.jsx)(eI,{value:e.full_name||"",disabled:!0,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eM,{children:"رقم الهاتف"}),(0,t.jsx)(eI,{value:e.phone,disabled:!0,className:"mt-1",dir:"ltr"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eM,{children:"البريد الإلكتروني"}),(0,t.jsx)(eI,{value:e.email||"",disabled:!0,className:"mt-1",dir:"ltr"})]}),(0,t.jsx)(eb.default,{href:"/profile",children:(0,t.jsxs)(s.Button,{className:"w-full mt-2 bg-[#d4a574] hover:bg-[#c49464] text-[#1a1a1a]",children:[(0,t.jsx)(ef,{className:"w-4 h-4 ml-2"}),"إدارة الملف الشخصي الكامل"]})}),(0,t.jsxs)(s.Button,{variant:"destructive",className:"w-full mt-2",onClick:r,children:[(0,t.jsx)(em.LogOut,{className:"w-4 h-4 ml-2"}),"تسجيل الخروج"]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"روابط سريعة"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-2",children:[(0,t.jsx)(eb.default,{href:"/profile",children:(0,t.jsxs)(s.Button,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(es.MapPin,{className:"w-4 h-4 ml-2"}),"عناويني المحفوظة"]})}),(0,t.jsx)(eb.default,{href:"/profile",children:(0,t.jsxs)(s.Button,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(er.Car,{className:"w-4 h-4 ml-2"}),"سياراتي"]})}),(0,t.jsx)(eb.default,{href:"/profile",children:(0,t.jsxs)(s.Button,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(ep.CreditCard,{className:"w-4 h-4 ml-2"}),"طرق الدفع"]})})]})]})]})}function eM({children:e}){return(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e})}function eI(e){return(0,t.jsx)("input",{...e,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#d4a574] ${e.className||""}`})}e.s(["default",()=>eS],78928)}]);
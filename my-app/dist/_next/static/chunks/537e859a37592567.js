(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},5125,e=>{"use strict";let t=(0,e.i(75254).default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>t],5125)},94179,e=>{"use strict";var t=e.i(43476),a=e.i(25913),r=e.i(86011),s=e.i(47163);let i=(0,a.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a="default",asChild:n=!1,...l}){let c=n?r.Slot.Root:"span";return(0,t.jsx)(c,{"data-slot":"badge","data-variant":a,className:(0,s.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>n])},50337,73297,e=>{"use strict";function t(e,t){switch(t){case"suv":return e.base_price_suv;case"luxury":return e.base_price_luxury;default:return e.base_price_standard}}function a(e){return e.reduce((e,t)=>e+t.price,0)}function r(e){return`${new Intl.NumberFormat("ar-EG",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)} ج.م`}function s(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})}function i(e){let[t,a]=e.split(":"),r=parseInt(t,10);return`${r>12?r-12:0===r?12:r}:${a} ${r>=12?"م":"ص"}`}function n(e=1990,t=new Date().getFullYear()){let a=[];for(let r=t;r>=e;r--)a.push(r);return a}function l(){let e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}function c(e=30){let t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]}e.s(["CAR_BRANDS",0,["Toyota","Honda","Nissan","Hyundai","Kia","BMW","Mercedes","Audi","Volkswagen","Ford","Chevrolet","Peugeot","Renault","Fiat","Chery","BYD","MG","Geely","Changan","Suzuki","Mitsubishi","Subaru","Lexus","Infiniti","Acura","Volvo","Jaguar","Land Rover","Porsche","Tesla"],"CATEGORY_LABELS",0,{standard:"عادية",suv:"دفع رباعي",luxury:"فاخرة"},"PAYMENT_METHOD_LABELS",0,{cash:"كاش",online:"دفع إلكتروني"},"SERVICE_AREAS",0,["6th of October","Sheikh Zayed"],"STATUS_COLORS",0,{pending:"bg-yellow-500",confirmed:"bg-blue-500",assigned:"bg-purple-500",on_the_way:"bg-orange-500",in_progress:"bg-cyan-500",completed:"bg-green-500",cancelled:"bg-red-500"},"STATUS_LABELS",0,{pending:"معلق",confirmed:"مؤكد",assigned:"تم التعيين",on_the_way:"في الطريق",in_progress:"قيد التنفيذ",completed:"مكتمل",cancelled:"ملغي"},"TIME_SLOTS",0,["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30"]],73297),e.s(["calculateAddOnsTotal",()=>a,"calculateServicePrice",()=>t,"formatDate",()=>s,"formatPriceWithCurrency",()=>r,"formatTime",()=>i,"getMaxBookingDate",()=>c,"getTomorrowDate",()=>l,"getYearsRange",()=>n],50337)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},23750,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>r])},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},76163,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(46932),s=e.i(70065),i=e.i(67881),n=e.i(23750),l=e.i(94179),c=e.i(55436),d=e.i(84614),o=e.i(43432),u=e.i(63488),h=e.i(5125),m=e.i(87316),x=e.i(72520),g=e.i(31278),f=e.i(20755),p=e.i(46696),y=e.i(22016),v=e.i(50337);function b(){let[e,b]=(0,a.useState)([]),[j,w]=(0,a.useState)(!0),[N,_]=(0,a.useState)(""),[S,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{C()},[]);let C=async()=>{try{let{data:e,error:t}=await f.supabase.from("users").select("*").eq("role","customer").order("created_at",{ascending:!1});if(t)throw t;let a=await Promise.all((e||[]).map(async e=>{let{data:t}=await f.supabase.from("orders").select("total_amount, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}),{data:a}=await f.supabase.from("cars").select("id").eq("user_id",e.id),r=t?.length||0,s=t?.reduce((e,t)=>e+(t.total_amount||0),0)||0,i=t?.[0]?.created_at||null;return{...e,total_orders:r,total_spent:s,cars_count:a?.length||0,last_order_date:i}}));b(a)}catch(e){p.toast.error("فشل في تحميل بيانات العملاء")}finally{w(!1)}},T=e.filter(e=>{let t=N.toLowerCase();return e.full_name?.toLowerCase().includes(t)||e.phone?.includes(N)||e.email?.toLowerCase().includes(t)});return j?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-[#d4a574]"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-[#1a1a1a] text-white px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(y.default,{href:"/admin/dashboard",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"text-white",children:(0,t.jsx)(x.ArrowRight,{className:"w-5 h-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"إدارة العملاء"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"قاعدة بيانات العملاء وتاريخهم"})]})]}),(0,t.jsxs)(l.Badge,{className:"bg-[#d4a574] text-[#1a1a1a]",children:[e.length," عميل"]})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)(n.Input,{placeholder:"بحث بالاسم أو رقم الهاتف أو البريد...",value:N,onChange:e=>_(e.target.value),className:"pr-10"})]})})}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map((e,a)=>(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},children:(0,t.jsx)(s.Card,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>k(e),children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-[#d4a574]/20 rounded-full flex items-center justify-center",children:(0,t.jsx)(d.User,{className:"w-6 h-6 text-[#d4a574]"})}),(0,t.jsxs)(l.Badge,{variant:e.total_orders>0?"default":"secondary",children:[e.total_orders," طلب"]})]}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-1",children:e.full_name||"عميل"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(o.Phone,{className:"w-4 h-4"}),(0,t.jsx)("span",{dir:"ltr",children:e.phone})]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(u.Mail,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"truncate",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(h.Car,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.cars_count," سيارة"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(m.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["مسجل منذ ",(0,v.formatDate)(e.created_at)]})]})]}),e.total_orders>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"إجمالي المشتريات"}),(0,t.jsxs)("span",{className:"font-bold text-[#1a1a1a]",children:[e.total_spent.toLocaleString()," جنيه"]})]}),e.last_order_date&&(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["آخر طلب: ",(0,v.formatDate)(e.last_order_date)]})]})]})})},e.id))}),0===T.length&&(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(d.User,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-600",children:"لا يوجد عملاء"}),(0,t.jsx)("p",{className:"text-gray-400",children:"جرب تغيير معايير البحث"})]})})]})]})}e.s(["default",()=>b])}]);
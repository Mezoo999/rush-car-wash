(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";var t=e.i(17521);e.s(["Loader2",()=>t.default])},18566,(e,t,r)=>{t.exports=e.r(76562)},50041,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(20755),i=e.i(46696),n=e.i(31278);function u({children:e}){let u=(0,a.useRouter)(),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:t}=await s.supabase.auth.getUser();if(t||!e){i.toast.error("يرجى تسجيل الدخول أولاً"),u.push("/admin/login");return}let{data:r,error:a}=await s.supabase.from("users").select("role").eq("id",e.id).single();if(a||!r||"admin"!==r.role){i.toast.error("ليس لديك صلاحيات الإدارة"),await s.supabase.auth.signOut(),u.push("/admin/login");return}d(!0)}catch(e){i.toast.error("حدث خطأ في التحقق من الصلاحيات"),u.push("/admin/login")}finally{l(!1)}})()},[u]),o)?(0,t.jsx)("div",{className:"min-h-screen bg-[#faf8f5] flex items-center justify-center",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-[#d4a574]"})}):c?(0,t.jsx)(t.Fragment,{children:e}):null}e.s(["ProtectedAdminRoute",()=>u])}]);